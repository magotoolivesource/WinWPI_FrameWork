FrameWork_2DAPI 문서 2: 핵심 자료구조 구현
모든 게임 프레임워크의 기반에는 위치, 크기, 속도 등 게임 세계의 데이터를 표현하는 데 사용되는 핵심적인 자료구조가 있습니다. 이번 문서에서는 2D 게임에서 가장 필수적인 두 가지 자료구조, Vector와 Rect를 직접 구현하는 방법을 알아봅니다.

1. 2D 벡터(Vector) 클래스 구현
2D 벡터는 방향과 크기를 가진 값으로, 2D 공간의 위치(좌표), 속도, 가속도, 방향 등 거의 모든 것을 표현하는 데 사용됩니다. x와 y라는 두 개의 float 멤버를 가진 간단한 구조체 또는 클래스로 시작할 수 있습니다.

Vector.h
#pragma once
#include <cmath> // sqrtf 사용을 위해 포함

// 2D 벡터를 나타내는 구조체
struct Vec2 {
    float x, y;

    // 생성자
    Vec2() : x(0.0f), y(0.0f) {}
    Vec2(float x, float y) : x(x), y(y) {}

    // 벡터 연산을 위한 멤버 함수 및 연산자 오버로딩
    
    // 덧셈
    Vec2 operator+(const Vec2& other) const {
        return Vec2(x + other.x, y + other.y);
    }

    // 뺄셈
    Vec2 operator-(const Vec2& other) const {
        return Vec2(x - other.x, y - other.y);
    }

    // 스칼라 곱셈
    Vec2 operator*(float scalar) const {
        return Vec2(x * scalar, y * scalar);
    }

    // 벡터의 크기(길이) 계산
    float Magnitude() const {
        return sqrtf(x * x + y * y);
    }

    // 벡터 정규화 (크기를 1로 만듦)
    Vec2 Normalized() const {
        float mag = Magnitude();
        if (mag > 0) {
            return Vec2(x / mag, y / mag);
        }
        return Vec2(0, 0);
    }
};
**연산자 오버로딩(Operator Overloading)**을 통해 벡터끼리의 덧셈, 뺄셈 등을 직관적인 코드로 작성할 수 있게 됩니다. (예: Vec2 v3 = v1 + v2;)

2. 사각형(Rectangle) 클래스 구현
사각형은 UI 요소, 충돌 범위(Collider), 카메라 뷰포트 등 게임에서 영역을 정의하는 데 널리 사용됩니다. 사각형은 여러 방식으로 표현할 수 있지만, 일반적으로 '시작 위치'와 '너비/높이' 또는 '최소점(min)'과 '최대점(max)'으로 정의합니다.

Rect.h
#pragma once
#include "Vector.h" // Vec2를 사용하기 위해 포함

// 사각형을 나타내는 구조체
struct Rect {
    float x, y, width, height;

    // 생성자
    Rect() : x(0.0f), y(0.0f), width(0.0f), height(0.0f) {}
    Rect(float x, float y, float w, float h) : x(x), y(y), width(w), height(h) {}
    Rect(const Vec2& pos, const Vec2& size) : x(pos.x), y(pos.y), width(size.x), height(size.y) {}

    // 특정 점이 사각형 내부에 있는지 확인하는 함수
    bool Contains(const Vec2& point) const {
        return (point.x >= x && point.x <= x + width &&
                point.y >= y && point.y <= y + height);
    }

    // 다른 사각형과 겹치는지 확인하는 함수 (충돌 감지에 사용)
    bool Intersects(const Rect& other) const {
        return (x < other.x + other.width &&
                x + width > other.x &&
                y < other.y + other.height &&
                y + height > other.y);
    }
};
이러한 헬퍼 함수(Contains, Intersects)를 미리 구현해두면 마우스 클릭 판정이나 충돌 감지 로직을 매우 간결하게 작성할 수 있습니다.

3. 수학 유틸리티 클래스
게임 개발에는 벡터의 내적(Dot Product), 두 점 사이의 거리 계산, 선형 보간(Lerp) 등 공통적으로 사용되는 수학 함수들이 많습니다. 이러한 함수들을 정적(static) 멤버 함수로 구성된 MyMath와 같은 유틸리티 클래스에 모아두면 프로젝트 어디서든 편리하게 사용할 수 있습니다.

MyMath.h
#pragma once
#include "Vector.h"

class MyMath {
public:
    // 두 벡터의 내적 계산
    static float Dot(const Vec2& a, const Vec2& b) {
        return a.x * b.x + a.y * b.y;
    }

    // 두 점 사이의 거리 계산
    static float Distance(const Vec2& a, const Vec2& b) {
        return (a - b).Magnitude();
    }

    // 선형 보간 (Linear Interpolation)
    // t가 0이면 start, 1이면 end를 반환. 0.5면 둘의 중간 지점을 반환.
    static Vec2 Lerp(const Vec2& start, const Vec2& end, float t) {
        return start + (end - start) * t;
    }
};
AI에게 할 수 있는 질문
개념 이해
"벡터의 '정규화(Normalization)'는 무엇이며, 게임 개발에서 어떤 경우에 유용하게 사용되는지 구체적인 예를 들어 설명해 줘. (예: 방향 벡터 계산)"
"두 벡터의 '내적(Dot Product)'이 무엇을 의미하는지, 그리고 내적의 결과값(양수, 0, 음수)을 통해 두 벡터의 관계(예각, 직각, 둔각)를 어떻게 알 수 있는지 설명해 줘."
"Rect::Intersects 함수가 두 사각형의 충돌을 감지하는 원리를 '분리 축 이론(Separating Axis Theorem, SAT)'의 가장 간단한 형태로 설명해 줘."
기능 구현 및 결과 도출
"두 벡터 사이의 각도(degree)를 계산하는 함수 float Angle(const Vec2& a, const Vec2& b)를 MyMath 클래스에 추가하고 싶어. 내적과 acos 함수를 사용해서 어떻게 구현해야 하는지 코드를 작성해 줘."
"Vec2 구조체에 *= 연산자나 == 비교 연산자처럼 더 많은 연산자 오버로딩을 추가하고 싶어. 해당 연산자들을 구현하는 코드를 보여줘."
"어떤 방향 벡터를 기준으로 점을 회전시키는 함수 Vec2 Rotate(const Vec2& point, float angle)를 MyMath에 추가하고 싶어. 삼각함수(sin, cos)를 사용해서 회전 변환 행렬을 직접 구현하는 코드를 작성해 줘."
"Rect 구조체에 두 사각형의 겹치는 영역을 새로운 Rect로 반환하는 Rect Intersection(const Rect& other) const 함수를 추가하는 코드를 작성해 줘. 만약 겹치지 않는다면 어떻게 처리해야 할까?"